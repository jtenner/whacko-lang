; ModuleID = 'whacko'
source_filename = "whacko"
target triple = "wasm32-wasi"

declare void @__whacko_gc_initialize()

declare ptr @__whacko_gc_alloc(i32, i32)

declare void @__whacko_gc_store_field_ptr(i32, ptr, ptr, ptr)

define void @_start() {
entry:
  call void @__whacko_gc_initialize()
  %"alloca~0" = alloca ptr, align 8
  %"alloca~1" = alloca ptr, align 8
  %"alloca~2" = alloca ptr, align 8
  %"alloca~3" = alloca ptr, align 8
  %"result~233" = call ptr @__whacko_gc_alloc(i32 1, i32 ptrtoint (ptr getelementptr ({ ptr, ptr, i32, i32 }, ptr null, i32 1) to i32))
  call void @"callable:[test/programs/simpleInterface.wo]A.constructor;methodType:classType:[test/programs/simpleInterface.wo]A<>#()=>voidType"(ptr %"result~233")
  store ptr %"result~233", ptr %"alloca~0", align 8
  %"result~235" = call ptr @__whacko_gc_alloc(i32 2, i32 ptrtoint (ptr getelementptr ({ ptr, ptr, i32, i32 }, ptr null, i32 1) to i32))
  call void @"callable:[test/programs/simpleInterface.wo]B.constructor;methodType:classType:[test/programs/simpleInterface.wo]B<>#()=>voidType"(ptr %"result~235")
  store ptr %"result~235", ptr %"alloca~1", align 8
  %"result~237" = call ptr @__whacko_gc_alloc(i32 3, i32 ptrtoint (ptr getelementptr ({ ptr, ptr, i32, i32 }, ptr null, i32 1) to i32))
  call void @"callable:[test/programs/simpleInterface.wo]C.constructor;methodType:classType:[test/programs/simpleInterface.wo]C<>#()=>voidType"(ptr %"result~237")
  store ptr %"result~237", ptr %"alloca~2", align 8
  %"result~239" = call ptr @__whacko_gc_alloc(i32 4, i32 ptrtoint (ptr getelementptr ({ ptr, ptr, i32, i32 }, ptr null, i32 1) to i32))
  call void @"callable:[test/programs/simpleInterface.wo]D.constructor;methodType:classType:[test/programs/simpleInterface.wo]D<>#()=>voidType"(ptr %"result~239")
  store ptr %"result~239", ptr %"alloca~3", align 8
  %"107~inst" = load ptr, ptr %"alloca~0", align 8
  %"111~inst" = call i32 @callTest(ptr %"107~inst")
  %"117~inst" = icmp eq i32 %"111~inst", 42
  br i1 %"117~inst", label %"next~120", label %"falsy~119"

"falsy~119":                                      ; preds = %entry
  unreachable

"next~120":                                       ; preds = %entry
  %"124~inst" = load ptr, ptr %"alloca~1", align 8
  %"127~inst" = call i32 @callTest(ptr %"124~inst")
  %"133~inst" = icmp eq i32 %"127~inst", 69
  br i1 %"133~inst", label %"next~136", label %"falsy~135"

"falsy~135":                                      ; preds = %"next~120"
  unreachable

"next~136":                                       ; preds = %"next~120"
  %"140~inst" = load ptr, ptr %"alloca~2", align 8
  %"143~inst" = call i32 @callTest(ptr %"140~inst")
  %"149~inst" = icmp eq i32 %"143~inst", 123
  br i1 %"149~inst", label %"next~152", label %"falsy~151"

"falsy~151":                                      ; preds = %"next~136"
  unreachable

"next~152":                                       ; preds = %"next~136"
  %"156~inst" = load ptr, ptr %"alloca~3", align 8
  %"159~inst" = call i32 @callTest(ptr %"156~inst")
  %"165~inst" = icmp eq i32 %"159~inst", 456
  br i1 %"165~inst", label %"next~168", label %"falsy~167"

"falsy~167":                                      ; preds = %"next~152"
  unreachable

"next~168":                                       ; preds = %"next~152"
  ret void
}

define void @"callable:[test/programs/simpleInterface.wo]A.constructor;methodType:classType:[test/programs/simpleInterface.wo]A<>#()=>voidType"(ptr %0) {
entry:
  %"alloca~0" = alloca ptr, align 8
  store ptr %0, ptr %"alloca~0", align 8
  ret void
}

define void @"callable:[test/programs/simpleInterface.wo]B.constructor;methodType:classType:[test/programs/simpleInterface.wo]B<>#()=>voidType"(ptr %0) {
entry:
  %"alloca~0" = alloca ptr, align 8
  store ptr %0, ptr %"alloca~0", align 8
  ret void
}

define void @"callable:[test/programs/simpleInterface.wo]C.constructor;methodType:classType:[test/programs/simpleInterface.wo]C<>#()=>voidType"(ptr %0) {
entry:
  %"alloca~0" = alloca ptr, align 8
  store ptr %0, ptr %"alloca~0", align 8
  ret void
}

define void @"callable:[test/programs/simpleInterface.wo]D.constructor;methodType:classType:[test/programs/simpleInterface.wo]D<>#()=>voidType"(ptr %0) {
entry:
  %"alloca~0" = alloca ptr, align 8
  store ptr %0, ptr %"alloca~0", align 8
  ret void
}

define i32 @callTest(ptr %0) {
entry:
  %"alloca~0" = alloca ptr, align 8
  store ptr %0, ptr %"alloca~0", align 8
  %"174~inst" = load ptr, ptr %"alloca~0", align 8
  %"178~inst" = call i32 @"callable:[test/programs/simpleInterface.wo]Test.test;methodType:interfaceType:[test/programs/simpleInterface.wo]Test<>#()=>i32Type"(ptr %"174~inst")
  ret i32 %"178~inst"
}

define i32 @"callable:[test/programs/simpleInterface.wo]Test.test;methodType:interfaceType:[test/programs/simpleInterface.wo]Test<>#()=>i32Type"(ptr %0) {
"entry~240":
  %"typeGEP~241" = getelementptr { ptr, ptr, i32, i32 }, ptr %0, i32 2
  %1 = load i32, ptr %"typeGEP~241", align 4
  switch i32 %1, label %"default~242" [
    i32 1, label %"callable:[test/programs/simpleInterface.wo]A.test;methodType:classType:[test/programs/simpleInterface.wo]A<>#()=>i32Type"
    i32 2, label %"callable:[test/programs/simpleInterface.wo]B.test;methodType:classType:[test/programs/simpleInterface.wo]B<>#()=>i32Type"
    i32 3, label %"callable:[test/programs/simpleInterface.wo]C.test;methodType:classType:[test/programs/simpleInterface.wo]C<>#()=>i32Type"
    i32 4, label %"callable:[test/programs/simpleInterface.wo]D.test;methodType:classType:[test/programs/simpleInterface.wo]D<>#()=>i32Type"
  ]

"default~242":                                    ; preds = %"entry~240"
  unreachable

"callable:[test/programs/simpleInterface.wo]A.test;methodType:classType:[test/programs/simpleInterface.wo]A<>#()=>i32Type": ; preds = %"entry~240"
  %2 = call i32 @"callable:[test/programs/simpleInterface.wo]A.test;methodType:classType:[test/programs/simpleInterface.wo]A<>#()=>i32Type"(ptr %0)
  ret i32 %2

"callable:[test/programs/simpleInterface.wo]B.test;methodType:classType:[test/programs/simpleInterface.wo]B<>#()=>i32Type": ; preds = %"entry~240"
  %3 = call i32 @"callable:[test/programs/simpleInterface.wo]B.test;methodType:classType:[test/programs/simpleInterface.wo]B<>#()=>i32Type"(ptr %0)
  ret i32 %3

"callable:[test/programs/simpleInterface.wo]C.test;methodType:classType:[test/programs/simpleInterface.wo]C<>#()=>i32Type": ; preds = %"entry~240"
  %4 = call i32 @"callable:[test/programs/simpleInterface.wo]C.test;methodType:classType:[test/programs/simpleInterface.wo]C<>#()=>i32Type"(ptr %0)
  ret i32 %4

"callable:[test/programs/simpleInterface.wo]D.test;methodType:classType:[test/programs/simpleInterface.wo]D<>#()=>i32Type": ; preds = %"entry~240"
  %5 = call i32 @"callable:[test/programs/simpleInterface.wo]D.test;methodType:classType:[test/programs/simpleInterface.wo]D<>#()=>i32Type"(ptr %0)
  ret i32 %5
}

define i32 @"callable:[test/programs/simpleInterface.wo]A.test;methodType:classType:[test/programs/simpleInterface.wo]A<>#()=>i32Type"(ptr %0) {
entry:
  %"alloca~0" = alloca ptr, align 8
  store ptr %0, ptr %"alloca~0", align 8
  ret i32 42
}

define i32 @"callable:[test/programs/simpleInterface.wo]B.test;methodType:classType:[test/programs/simpleInterface.wo]B<>#()=>i32Type"(ptr %0) {
entry:
  %"alloca~0" = alloca ptr, align 8
  store ptr %0, ptr %"alloca~0", align 8
  ret i32 69
}

define i32 @"callable:[test/programs/simpleInterface.wo]C.test;methodType:classType:[test/programs/simpleInterface.wo]C<>#()=>i32Type"(ptr %0) {
entry:
  %"alloca~0" = alloca ptr, align 8
  store ptr %0, ptr %"alloca~0", align 8
  ret i32 123
}

define i32 @"callable:[test/programs/simpleInterface.wo]D.test;methodType:classType:[test/programs/simpleInterface.wo]D<>#()=>i32Type"(ptr %0) {
entry:
  %"alloca~0" = alloca ptr, align 8
  store ptr %0, ptr %"alloca~0", align 8
  ret i32 456
}

declare void @__whacko_gc_visit(ptr)

define void @__visit_whacko_object(ptr %0) {
"entry~243":
  %"typeGEP~245" = getelementptr { ptr, ptr, i32, i32 }, ptr %0, i32 2
  %1 = load i32, ptr %"typeGEP~245", align 4
  switch i32 %1, label %"unreachable~244" [
    i32 1, label %"classType:[test/programs/simpleInterface.wo]A<>"
    i32 2, label %"classType:[test/programs/simpleInterface.wo]B<>"
    i32 3, label %"classType:[test/programs/simpleInterface.wo]C<>"
    i32 4, label %"classType:[test/programs/simpleInterface.wo]D<>"
    i32 5, label %"classType:[std/String.wo]String<>"
  ]

"unreachable~244":                                ; preds = %"entry~243"
  unreachable

"classType:[test/programs/simpleInterface.wo]A<>": ; preds = %"entry~243"
  ret void

"classType:[test/programs/simpleInterface.wo]B<>": ; preds = %"entry~243"
  ret void

"classType:[test/programs/simpleInterface.wo]C<>": ; preds = %"entry~243"
  ret void

"classType:[test/programs/simpleInterface.wo]D<>": ; preds = %"entry~243"
  ret void

"classType:[std/String.wo]String<>":              ; preds = %"entry~243"
  ret void
}
